/*!CK:1436001089!*//*1407852000,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["vjwVr"]); }

__d("ControlledReferer",["Event","URI","UserAgent_DEPRECATED"],function(a,b,c,d,e,f,g,h,i){var j={useFacebookReferer:function(k,l,m){var n=false;function o(){if(n)return;var q=k.contentWindow.location.pathname;if(q!=='/intern/common/referer_frame.php'&&q!=='/common/referer_frame.php')return;n=true;k.contentWindow.document.body.style.margin=0;l();}var p;if(document.domain!=='facebook.com'){p='/intern/common/referer_frame.php';}else if(i.opera()){p='/common/referer_frame.php';}else if(h().isSecure()){p='https://s-static.ak.facebook.com/common/referer_frame.php';}else p='http://static.ak.facebook.com/common/referer_frame.php';if(m)p+='?fb_source='+m;g.listen(k,'load',o);k.src=p;},useFacebookRefererHtml:function(k,l,m){j.useFacebookReferer(k,function(){k.contentWindow.document.body.innerHTML=l;},m);}};e.exports=j;},null);
__d("TrackingPixel",["Arbiter","ControlledReferer"],function(a,b,c,d,e,f,g,h){var i={_iframe:undefined,loadWithNoReferrer:function(j){if(!i._iframe){var k=document.createElement('iframe');k.frameborder=0;k.width=k.height=1;k.style.position='absolute';k.style.top='-10px';h.useFacebookReferer(k,function(){g.inform('TrackingPixel/iframeIsLoaded',null,g.BEHAVIOR_PERSISTENT);},null);document.body.appendChild(k);i._iframe=k;}g.subscribe('TrackingPixel/iframeIsLoaded',function(){var l=i._iframe.contentWindow.document,m=l.createElement('img');m.src=j;});}};e.exports=i;},null);
__d("ExternalTrackingTag",["AsyncSignal","TrackingPixel","Event"],function(a,b,c,d,e,f,g,h,i){var j={listenForElementClick:function(k,l,m,n,o){i.listen(k,'click',function(){j.sendRequest(l,m,n,o);});},sendRequest:function(k,l,m,n){if(!k)return;new g('/ads/external_tracking_tag/',{href:k,tracking_tag_id:l,adgroup_id:m,ad_id:n}).send();h.loadWithNoReferrer(k);}};e.exports=j;},null);
__d("FeedAdsClickLogger",["Arbiter","AsyncRequest","Banzai","collectDataAttributes","DOM","ge","LitestandMessages","LitestandStream","Parent","TrackingNodes","ExternalTrackingTag","URI","isFacebookURI"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t='ssinfeed',u={},v=false,w=[];function x(){"use strict";}x.prototype.init=function(y){"use strict";g.subscribe("ClickRefAction/new",this.onNewUserAction.bind(this));if(y.append_tracking_data_to_links){this.appendTrackingDataToLinks();g.subscribe(m.STORIES_INSERTED,this.appendTrackingDataToLinks.bind(this));g.subscribe('FeedAdsClickLogger/refreshTrackingData',this.appendTrackingDataToLinks.bind(this),g.SUBSCRIBE_NEW);}};x.prototype.getStories=function(){"use strict";var y=n.getStreamRoot();if(y){return k.scry(y,n.getStoriesSelector());}else{var z=l('home_stream');if(z)return k.scry(z,'.uiStreamStory');}return [];};x.prototype.appendTrackingDataToLinks=function(){"use strict";var y=this.getStories();for(var z=0;z<y.length;z++){var aa=y[z];if(aa in w)continue;var ba=aa.getAttribute('data-ft');if(!ba||(ba.indexOf('ei')===-1)&&(ba.indexOf('mei')===-1))continue;var ca=k.scry(aa,'a');for(var da=0;da<ca.length;da++){var ea=ca[da];if(ea.getAttribute('ajaxify')!=null)continue;if(ea.getAttribute('rel')!=null)continue;var fa=ea.getAttribute('href');if(!fa||fa.charAt(0)==='#')continue;var ga=r(ea);if(s(ga)===false)continue;if(ga.isLinkshimURI()===true)continue;var ha=j(ea,['ft']).ft,ia=ga.getQueryData();ia.ft=ha;ia.__md__=0;ga.setQueryData(ia);ea.setAttribute('href',ga.toString());ea.setAttribute('onmousedown',"this.href = this.href.replace('__md__=0', '__md__=1');");}w.push(aa);}};x.prototype.getHref=function(y){"use strict";return (y.getAttribute&&(y.getAttribute('ajaxify')||y.getAttribute('data-endpoint'))||y.action||y.href);};x.prototype.sendLogRequest=function(y){"use strict";var z=y.ei||y.ai;if(!z&&y.mei)z=y.mf_story_key;if(y!==null&&typeof(z)==="string"){var aa=false;if(y.tn){var ba=p.parseTrackingNodeString(y.tn);for(var ca=0;ca<ba.length;ca++){var da=ba[ca][0];switch(da){case p.types.LIKE_LINK:case p.types.UNLIKE_LINK:case p.types.COMMENT:case p.types.ADD_COMMENT_BOX:return;case p.types.XBUTTON:case p.types.HIDE_LINK:case p.types.REPORT_SPAM_LINK:case p.types.HIDE_ALL_LINK:case p.types.DROPDOWN_BUTTON:case p.types.UNHIDE_LINK:return;case p.types.RELATED_SHARE_ARTICLE:case p.types.RELATED_SHARE_VIDEO:return;case p.types.ATTACHMENT:case p.types.USER_MESSAGE:aa=true;break;}}}var ea=Date.now(),fa=500;y.duplicate_click=!!u[z]&&(ea-u[z]<fa);u[z]=ea;if(i.isEnabled('ssinfeed')){i.post(t,y,{delay:0,retry:i.isEnabled('ssinfeed_retry')});}else{var ga=new h('/ajax/ssinfeed/end/').setData(y).setAllowCrossPageTransition(true).setMethod('POST');ga.send();}var ha=y.href;if(r(ha).isLinkshimURI()&&r(ha).getQueryData())ha=r(ha).getQueryData().u;if(aa&&y.external_tracking_tag&&!y.duplicate_click&&ha&&s(r(ha))===false)q.sendRequest(y.external_tracking_tag.url,y.external_tracking_tag.tag_id,y.external_tracking_tag.adgroup_id);}};x.prototype.onNewUserAction=function(y,z){"use strict";if(!z.node)return;var aa=this.getHref(z.node),ba=o.byTag(z.node,'input')||o.byTag(z.node,'button');if(!aa&&ba&&ba.type=="submit"&&ba.getAttribute&&ba.getAttribute('data-ft'))aa="#";var ca;if(aa&&z.event&&(z.event.type==='click'||z.event.type==='contextmenu')){ca=j(z.node,['ft']);ca.ft.href=aa;ca.ft.mouse_type=z.event.type;this.sendLogRequest(ca.ft);}};e.exports.init=function(y){if(v===false){(new x()).init(y);v=true;}};},null);